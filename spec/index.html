<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="o2r project">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Specification - ERC spec</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../erc.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">ERC spec</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ERC <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Specification</a>
</li>

                        
                            
<li >
    <a href="bagit/">BagIt Extension</a>
</li>

                        
                            
<li >
    <a href="r/">R Extension</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../user-guide/">User guide</a>
                    </li>
                
                
                
                    <li >
                        <a href="../dev-guide/">Developer guide</a>
                    </li>
                
                
                
                    <li >
                        <a href="../glossary/">Glossary</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="bagit/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#erc-specification">ERC specification</a></li>
        
            <li class="second-level"><a href="#version">Version</a></li>
            
        
            <li class="second-level"><a href="#table-of-contents">Table of contents</a></li>
            
        
            <li class="second-level"><a href="#notational-conventions">Notational conventions</a></li>
            
        
            <li class="second-level"><a href="#purpose">Purpose</a></li>
            
        
            <li class="second-level"><a href="#fundamental-concepts">Fundamental concepts</a></li>
            
        
            <li class="second-level"><a href="#how-to-interact-with-a-bagtainer">How to interact with a bagtainer</a></li>
            
        
            <li class="second-level"><a href="#erc-structure">ERC structure</a></li>
            
                <li class="third-level"><a href="#base-directory">Base directory</a></li>
            
                <li class="third-level"><a href="#erc-configuration-file">ERC configuration file</a></li>
            
                <li class="third-level"><a href="#runtime-container-file">Runtime container file</a></li>
            
                <li class="third-level"><a href="#runtime-container-manifest">Runtime container manifest</a></li>
            
        
            <li class="second-level"><a href="#optional-elements">Optional elements</a></li>
            
        
            <li class="second-level"><a href="#mounting-data">Mounting data</a></li>
            
        
            <li class="second-level"><a href="#security-considerations">Security considerations</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="erc-specification">ERC specification</h1>
<p>An Exectuable Research Compendium (ERC) is a packaging convention for computational research.
It provides well-defined structure for data, code, documentation, and control of a piece of research and is suitable for long-term archival.</p>
<div class="alert note" markdown="block">
This is a draft specification. If you have comments or suggestions please file them in the <a href="https://github.com/o2r-project/erc-spec/issues">issue tracker</a>. If you have explicit changes please fork the <a href="https://github.com/o2r-project/erc-spec">git repo</a> and submit a pull request.
</div>

<h2 id="version">Version</h2>
<p>This version of this specification is <code>1</code>.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="#notational-conventions">Notational conventions</a></li>
<li><a href="#purpose">Purpose</a></li>
<li><a href="#fundamental-concepts">Fundamental concepts</a></li>
<li><a href="#erc-structure">Structure</a></li>
<li><a href="#mounting-data">Mounting data</a></li>
<li><a href="#security">Security</a></li>
<li><a href="bagit/">BagIt extension</a></li>
<li><a href="r/">R extension</a></li>
<li><a href="glossary.md">Glossary</a></li>
</ul>
<h2 id="notational-conventions">Notational conventions</h2>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described in <a href="http://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
<p>The key words "unspecified", "undefined", and "implementation-defined" are to be interpreted as described in the <a href="http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf#page=18">rationale for the C99 standard</a>.</p>
<h2 id="purpose">Purpose</h2>
<p>This specification defines a structure to carry and execute packaged scientific analyses.
These typically consist of data, the code and libraryies in executable form which are needed to replicate an analysis, and the outputs of the original  analysis.
This allows to collect  computational  research  in  a self-contained fashion and support transfer, archival, reproduction, and validation.</p>
<h2 id="fundamental-concepts">Fundamental concepts</h2>
<p>The bagtainer specification is inspired by two approaches to improve development and operation of software.
First,  <a href="https://en.wikipedia.org/wiki/Convention_over_configuration"><em>"convention  over  configuration"</em></a>, e.g. as  practiced  in  the Java build tool <a href="https://books.sonatype.com/mvnref-book/reference/installation-sect-conventionConfiguration.html">Maven</a>.
Second, <em>"DevOps"</em>, see <a href="https://en.wikipedia.org/wiki/">Wikipedia</a> or <a href="http://dl.acm.org/citation.cfm?id=2723882">Boettiger</a>.</p>
<p>Another core goal is <em>simplicity</em>, in the sense that this specification should not re-do something that already exists (if it is an open specification or tool) and it must be possible to create a valid and working ERC manually.</p>
<p>The final important notion is the one of <em>nested containers</em>.
Acknoledging that well defined standards exist for packaging a set of files, and that different approaches to create an executable code package, the collection of files that make up an ERC comprise one or more containers but are themselves subject to being put into a container.
We distinguish two containers.
The inner or "runtime" container and the outer container.</p>
<h2 id="how-to-interact-with-a-bagtainer">How to interact with a bagtainer</h2>
<p>The interaction steps with a bagtainer to (re-)run the contained analysis are as follows:</p>
<ul>
<li>(if compressed) open the bag</li>
<li>execute the container</li>
<li>(automatically) compare the output contained in the bag with the just created new output</li>
</ul>
<h2 id="erc-structure">ERC structure</h2>
<h3 id="base-directory">Base directory</h3>
<p>An ERC must have a <em>base directory</em>, whose name must only container characters, numbers, <code>_</code> (underscore) and <code>-</code> (minus sign).</p>
<p><strong>Regular expression</strong>: <code>[a-zA-Z0-9\-_]</code></p>
<p>The base directory MUST contain an <a href="#erc-configuration-file">ERC configuration file</a> named <code>erc.yml</code>.</p>
<h3 id="erc-configuration-file">ERC configuration file</h3>
<h4 id="format">Format</h4>
<p>The file <code>erc.yml</code> MUST be valid <a href="http://yaml.org/">YAML 1.2</a>.</p>
<h4 id="required-fields">Required fields</h4>
<p>The first document content of this file MUST contain the following string nodes at the root level.</p>
<ul>
<li><code>spec-version</code></li>
<li><code>id</code></li>
</ul>
<p>Minimal example:</p>
<pre><code class="yml">id: b9b0099e-9f8d-4a33-8acf-cb0c062efaec
version: 1
</code></pre>

<h4 id="metadata">Metadata</h4>
<p>discovery, control, ...</p>
<h4 id="comprehensive-example">Comprehensive example</h4>
<pre><code class="yml">id: b9b0099e-9f8d-4a33-8acf-cb0c062efaec
version: 1
mountpoint: &quot;/erc&quot;
payload_directory: &quot;data&quot;
config_file: &quot;erc.yml&quot;
container_file: &quot;image.tar&quot;
container_recipe: &quot;Dockerfile&quot;
command: &quot;rmarkdown::render(input = 'paper.Rmd', output_format = )&quot;
</code></pre>

<h3 id="runtime-container-file">Runtime container file</h3>
<p>The base directory MUST contain a tape archive file of a Docker image.</p>
<p>The file SHOULD be named <code>image.tar</code>.</p>
<h3 id="runtime-container-manifest">Runtime container manifest</h3>
<p>The base directory MUST contain a valid Dockerfile.
The Dockerfile MUST contain the build instructions for the runtime environment and MUST have been used to create the <a href="#runtime-container-file">runtime container file</a>.</p>
<p>The file SHOULD be named <code>Dockerfile</code>.</p>
<p>The Dockerfile MUST contain ...</p>
<h2 id="optional-elements">Optional elements</h2>
<p>...</p>
<h2 id="mounting-data">Mounting data</h2>
<p>How is data mounted into the container and where?</p>
<h2 id="security-considerations">Security considerations</h2>
<p>Why are ERC not a security risk?</p>
<p>https://tools.ietf.org/html/draft-kunze-bagit-14#section-6</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
